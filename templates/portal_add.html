{%- extends 'base.html' %}
{% block scripts %}
{{super()}}
<script type="text/javascript">
    var typeahead_genes = [
    {% for gene in typeahead_genes %}
    '{{gene}}',
    {% endfor %}
    ];

    $('#btn-sub').click(function () {
        var therapy = $('#therapy-select')[0].value;
        var type =  $('#type-select')[0].value;
        var implication =  $('#implication-select')[0].value;
        var source = $('#source-input')[0].value;
        var gene = $('#gene-input')[0].value;
        if (!(therapy && type && implication && source && gene)) {
            console.log('error');
        } else {
            console.log('wahoo');
        }
    });
</script>
<script src="{{url_for('static', filename='js/typeahead.bundle.js')}}"></script>
<script src="{{url_for('static', filename='js/portal.js')}}"></script>
{% endblock %}

{% block title %}{{ config['APP_NAME'] }}: Suggest addition{% endblock %}

{% block page_content %}
<h1>Submit Entry to {{ config['APP_NAME'] }}</h1>
<div class="panel panel-default">
    <div class="panel-body">
        <div class="row">
            <div class="col-md-8">
                <h3>Source</h3>
                <input id="source-input" name="g" type="text" class="form-control" placeholder="URL">
            </div>
            <div class="col-md-4">
                <h3>Gene</h3>
                <div class="input-group">
                    <input id="gene-input" name="g" type="text" class="form-control typeahead" placeholder="Gene Symbol">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <h3>Cancer Type</h3>
                <p>Select from <strong>{{diseases|length}}</strong> cancer types:</p>
                <select id="type-select" name="d" class="form-control">
                    <option selected disabled hidden>Select cancer type</option>
                    {% for disease in diseases %}
                    <option>{{disease}}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-4">
                <h3>Predictive Implication Level</h3>
                <p>Select from <strong>{{pred_impls|length}}</strong> predictive implication levels</p>
                <select id="implication-select" name="p" class="form-control">
                    <option selected disabled hidden>Select predictive implication level</option>
                    {% for pred_impl in pred_impls %}
                    <option>{{pred_impl}}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-4">
                <h3>Therapy</h3>
                <p>Select from <strong>{{therapy_names|length}}</strong> therapies:</p>
                <select id="therapy-select" name="t" class="form-control">
                    <option selected disabled hidden>Select therapy</option>
                    {% for therapy_name in therapy_names %}
                    <option>{{therapy_name}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div>
            <span class="input-group-btn">
                <button type="submit" class="btn btn-default" id="btn-sub" style="float:right; margin-top: 10px;">Submit</button>
            </span>

        </div>
    </div>
</div>
{%- endblock %}
